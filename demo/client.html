<!DOCTYPE html>

<html>
   <head>
      <script src="http://cdn.bootcss.com/blueimp-md5/1.1.0/js/md5.js"></script>
      <script type="text/javascript">
         var socket = null;
         var isopen = false;

         window.onload = function() {

            // socket = new WebSocket("ws://116.62.25.114:6900");
            socket = new WebSocket("ws://139.196.13.211:6900");
            // socket = new WebSocket("ws://localhost:6900");
            socket.binaryType = "arraybuffer";

            socket.onopen = function() {
               console.log("Connected!");
               isopen = true;
            }

            socket.onmessage = function(e) {
               if (typeof e.data == "string") {
                  console.log("Text message received: " + e.data);
               } else {
                  var arr = new Uint8Array(e.data);
                  var hex = '';
                  for (var i = 0; i < arr.length; i++) {
                     hex += ('00' + arr[i].toString(16)).substr(-2);
                  }
                  console.log("Binary message received: " + hex);
               }
            }

            socket.onclose = function(e) {
               console.log("Connection closed.");
               socket = null;
               isopen = false;
            }
         };

         function sendText() {
            if (isopen) {
               var username = "guest";
               var password = md5(md5("123456"));
               socket.send(JSON.stringify({"username": username, "password": password, "iname": "threeDaysTrend"}));
               console.log("Text message sent.");
            } else {
               console.log("Connection not opened.")
            }
         };

         function sendText1() {
            if (isopen) {
               var username = "guest";
               var password = md5(md5("123456"));
               socket.send(JSON.stringify({"username": username, "password": password, "itype": 0, "iname": "stationtest"}));
               console.log("Text message sent.");
            } else {
               console.log("Connection not opened.")
            }
         };

         function sendText2() {
            if (isopen) {
               var username = "guest";
               var password = md5(md5("123456"));
               socket.send(JSON.stringify({"username": username, "password": password, "itype": 0, "iname": "groupList"}));
               console.log("Text message sent.");
            } else {
               console.log("Connection not opened.")
            }
         };

         function sendText3() {
            if (isopen) {
               var username = "guest";
               var password = md5(md5("123456"));
               socket.send(JSON.stringify({"username": username, "password": password, "gid": 4, "iname": "groupStationList"}));
               console.log("Text message sent.");
            } else {
               console.log("Connection not opened.")
            }
         };

         function sendText4() {
            if (isopen) {
               var username = "guest";
               var password = md5(md5("123456"));
               socket.send(JSON.stringify({"username": username, "password": password,  "iname": "summary"}));
               console.log("Text message sent.");
            } else {
               console.log("Connection not opened.")
            }
         };

         function sendText5() {
            if (isopen) {
               var username = "guest";
               var password = md5(md5("123456"));
               socket.send(JSON.stringify({"username": username, "password": password, "iname": "stationSummary"}));
               console.log("Text message sent.");
            } else {
               console.log("Connection not opened.")
            }
         };

         function sendText6() {
            if (isopen) {
               var username = "guest";
               var password = md5(md5("123456"));
               socket.send(JSON.stringify({"username": username, "password": password, "iname": "weekTrend"}));
               console.log("Text message sent.");
            } else {
               console.log("Connection not opened.")
            }
         };

         function sendText7() {
            if (isopen) {
               var username = "guest";
               var password = md5(md5("123456"));
               socket.send(JSON.stringify({"username": username, "password": password, "iname": "monthTrend"}));
               console.log("Text message sent.");
            } else {
               console.log("Connection not opened.")
            }
         };

         function sendText8() {
            if (isopen) {
               var username = "guest";
               var password = md5(md5("123456"));
               socket.send(JSON.stringify({"username": username, "password": password, "iname": "halfYearTrend"}));
               console.log("Text message sent.");
            } else {
               console.log("Connection not opened.")
            }
         };

         function sendText9() {
            if (isopen) {
               var username = "guest";
               var password = md5(md5("123456"));
               socket.send(JSON.stringify({"username": username, "password": password, "iname": "watermeterUsageRank"}));
               console.log("Text message sent.");
            } else {
               console.log("Connection not opened.")
            }
         };

         function sendText10() {
            if (isopen) {
               var username = "guest";
               var password = md5(md5("123456"));
               socket.send(JSON.stringify({"username": username, "password": password,  "iname": "ammeterUsageRank"}));
               console.log("Text message sent.");
            } else {
               console.log("Connection not opened.")
            }
         };

         function sendText11() {
            if (isopen) {
               var username = "guest";
               var password = md5(md5("123456"));
               socket.send(JSON.stringify({"username": username, "password": password, "gid": 4, "iname": "ratioClock"}));
               console.log("Text message sent.");
            } else {
               console.log("Connection not opened.")
            }
         };

         function sendText12() {
            if (isopen) {
               var username = "guest";
               var password = md5(md5("123456"));
               socket.send(JSON.stringify({"username": username, "password": password, "gid": 4, "iname": "usageRank"}));
               console.log("Text message sent.");
            } else {
               console.log("Connection not opened.")
            }
         };

      </script>
   </head>
   <body>
      <p>Open your browser's JavaScript console to see what's happening (hit F12).</p>
      <button onclick='sendText();'>threeDaysTrend</button>
<!--      <button onclick='sendText1();'>getStationInfo</button>-->
      <button onclick='sendText2();'>groupList</button>
      <button onclick='sendText3();'>groupStationList</button>
      <button onclick='sendText4();'>summary</button>
      <button onclick='sendText5();'>stationSummary</button>
      <button onclick='sendText6();'>weekTrend</button>
      <button onclick='sendText7();'>monthTrend</button>
      <button onclick='sendText8();'>halfYearTrend</button>
      <button onclick='sendText9();'>watermeterUsageRank</button>
      <button onclick='sendText10();'>ammeterUsageRank</button>
      <button onclick='sendText11();'>ratioClock</button>
      <button onclick='sendText12();'>usageRank</button>

   </body>
</html>
